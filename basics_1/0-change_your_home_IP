#!/usr/bin/env bash
# Script pour configurer un serveur Ubuntu :
# - localhost -> 127.0.0.2
# - facebook.com -> 8.8.8.8

HOSTS_FILE="/etc/hosts"

# Vérifie si l'utilisateur est root
if [ "$EUID" -ne 0 ]; then
  echo "Ce script doit être exécuté en tant que superutilisateur (sudo)."
  exit 1
fi

# Sauvegarde du fichier /etc/hosts avant modification
cp "$HOSTS_FILE" "$HOSTS_FILE.bak"

# Supprime toute ligne contenant 'localhost' ou 'facebook.com' à la fin de ligne
sed -i '/[[:space:]]localhost$/d' "$HOSTS_FILE"
sed -i '/[[:space:]]facebook\.com$/d' "$HOSTS_FILE"

# Ajoute les nouvelles redirections
echo "127.0.0.2	localhost" >> "$HOSTS_FILE"
echo "8.8.8.8	facebook.com" >> "$HOSTS_FILE"

